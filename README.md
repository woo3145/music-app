### Demo

https://woo3145-music.netlify.app/

## 기능

- 음악 재생
  - 단독 음악 재생
    - 재생중인 플레이리스트가 있으면 중간에 삽입 후 재생
    - 플레이리스트에 중복 된 음악이 있을 시 제거 후 추가
  - 플레이리스트 재생
- 플레이리스트
  - Clear (현재 선택 된 음악 빼고 비우기)
  - 드래그하여 곡 순서 변경

### 오디오 플레이어 작업

###### howler.js 사용

##### 고려할점

- 오디오객체는 하나만 존재해야함
- 오디오의 현재 재생구간을 표시하는 position을 분리해야함(초마다 리렌더링됨)
  - position을 관리하는 훅이 오디오객체에 접근이 가능해야함(재생구간 변경)
- 오디오 선택은 리액트의 다양한 컴포넌트에서 선택가능
  ( load 함수를 전역에서 사용가능해야함 )
  => context api에 오디오 객체를 하나두고 load함수를 컨텍스트에 등록
- 오디오 객체와 load함수를 제외한 나머지는 redux로 관리

#### Todos

- [x] 오디오 객체와 load 함수를 담는 context
- [x] 오디오 컨트롤러 hook
- [x] 오디오 재생시간 hook (현재 재생시간, 구간이동 등)
- [x] redux에 오디오 메타데이터 추가(제목, 아티스트 등) 등록 (플레이리스트 store에 저장 됨)
- [x] 플레이리스트 기능
  - 플레이리스트 재생
  - 트랙 재생
    - 플레이리스트가 존재 O: 트랙 목록에서 현재 트랙의 다음 스택에 쌓고 재생
    - 플레이리스트가 존재 X: 새 플레이리스트를 만들고 트랙을 추가
  - 이전곡, 다음곡 (사이클로 구현)
- [x] 플레이 리스트 UI
  - 트랙 목록
  - 플레이리스트 내의 다른트랙 선택
  - 플레이리스트 비우기
  - 지정트랙 삭제
- [x] 플레이리스트 드래그 앤 드랍구현

#### Bugs

- [x] 1. 현재 플레이 버튼을 연속해서 누르면 holwer오디오 객체에 \_sounds 프로퍼티가 배열로 쌓여 음악이 중첩됨
- [x] 2. 새음악을 로드해도 이전에 재생중이던 음악이 계속재생됨
- [x] 3. 플레이리스트 중간에서 새로운 트랙을 추가하면 다른곡이 나옴
     (플레이리스트가 존재할때 트랙을 추가하면 중간 지점에서 곡을 추가 할 수 있어야함)
- [x] 4. 플레이리스트에 같은곡이 연속으로 있을 때 다음곡이나 이전곡을 하면 곡이 그대로 진행 됨 (처음으로 가야함)
     => setMusicPosition 에서 useEffect로 currentIdx 값을 추적하여 seek(0) 으로 보냄
  - [x] 새 트랙일 로드될때 이전곡이 지워지지 않음
- [x] 5. 재생중인 currentIdx의 변경이 있을 경우 현재 곡 재시작
     => usePosition에서 currentIdx 말고 currentTrack 을 감지
